<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackBox Marketing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex-grow: 1;
        }
        .title-font {
            font-family: 'Orbitron', sans-serif;
        }
        .glow-button {
            box-shadow: 0 0 8px #a78bfa, 0 0 16px #a78bfa;
        }
        #resultsContainer h2 {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            margin-top: 1.5rem; /* 24px */
            margin-bottom: 0.5rem; /* 8px */
            color: #d1d5db; /* gray-300 */
        }
        #resultsContainer ul {
            list-style-type: disc;
            list-style-position: inside;
            padding-left: 1rem; /* 16px */
            color: #9ca3af; /* gray-400 */
        }
        #resultsContainer li {
            margin-bottom: 0.5rem; /* 8px */
        }
        #resultsContainer p {
            margin-bottom: 1rem; /* 16px */
            color: #9ca3af; /* gray-400 */
        }
        #resultsContainer blockquote {
            border-left: 4px solid #8b5cf6; /* violet-500 */
            padding-left: 1rem;
            margin: 1rem 0;
            font-style: italic;
            color: #d1d5db;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 p-4 sm:p-6 md:p-8">

    <main class="w-full max-w-3xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-bold text-white title-font">
                <span class="text-violet-400">BlackBox</span> Marketing
            </h1>
            <p class="text-gray-400 mt-2 text-lg">Unlock creative marketing ideas with the power of AI.</p>
        </header>

        <!-- Main Content -->
        <section class="bg-black/50 p-6 rounded-2xl shadow-2xl border border-gray-700 backdrop-blur-sm">
            
            <!-- Step 1: Input -->
            <div class="mb-6">
                <label for="productInput" class="block text-lg font-semibold mb-2 text-violet-300">1. Enter Your Product or Company</label>
                <input id="productInput" type="text"
                    class="w-full p-3 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-400 focus:outline-none transition-shadow"
                    placeholder="e.g., 'A reusable smart coffee cup'">
            </div>

            <!-- Step 2: Choose Idea Type -->
            <div class="mb-6">
                <label class="block text-lg font-semibold mb-3 text-violet-300">2. Choose What to Generate</label>
                <div id="ideaType" class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                    <button data-type="slogans" class="idea-btn bg-gray-700 p-3 rounded-lg border-2 border-transparent hover:border-violet-400 transition-colors">Slogans</button>
                    <button data-type="audience" class="idea-btn bg-gray-700 p-3 rounded-lg border-2 border-transparent hover:border-violet-400 transition-colors">Target Audience</button>
                    <button data-type="social" class="idea-btn bg-gray-700 p-3 rounded-lg border-2 border-transparent hover:border-violet-400 transition-colors">Social Media Post</button>
                </div>
            </div>

            <!-- Step 3: Generate -->
            <div class="text-center mt-4">
                <button id="generateBtn"
                    class="bg-violet-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-violet-500 transition-all duration-300 transform hover:scale-105 glow-button disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none"
                    disabled>
                    Generate Ideas
                </button>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="w-full max-w-3xl mt-8 hidden">
            <div id="resultsContainer" class="bg-gray-800/50 p-6 rounded-2xl border border-gray-700">
                <!-- Results will be dynamically inserted here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="w-full text-center p-4 mt-8">
        <p class="text-gray-500 text-sm">&copy; 2025 BlackBox Marketing. All Rights Reserved.</p>
    </footer>

    <script>
        // --- DOM Elements ---
        const productInput = document.getElementById('productInput');
        const ideaTypeContainer = document.getElementById('ideaType');
        const generateBtn = document.getElementById('generateBtn');
        const resultsSection = document.getElementById('resultsSection');
        const resultsContainer = document.getElementById('resultsContainer');

        let selectedType = null;

        // --- Event Listeners ---
        ideaTypeContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('idea-btn')) {
                // Reset styles for all buttons
                document.querySelectorAll('.idea-btn').forEach(btn => {
                    btn.classList.remove('bg-violet-500', 'border-violet-400');
                    btn.classList.add('bg-gray-700');
                });

                // Apply style to clicked button
                e.target.classList.add('bg-violet-500', 'border-violet-400');
                e.target.classList.remove('bg-gray-700');
                
                selectedType = e.target.dataset.type;
                generateBtn.disabled = false;
            }
        });

        generateBtn.addEventListener('click', () => {
            const product = productInput.value.trim();
            if (!product) {
                alert('Please enter a product or company name.');
                return;
            }
            if (!selectedType) {
                alert('Please select an idea type to generate.');
                return;
            }
            
            generateIdeas(product, selectedType);
        });

        // --- Prompt Generation ---
        function getPrompt(product, type) {
            switch (type) {
                case 'slogans':
                    return `Generate 5 short, catchy, and creative marketing slogans for a product called "${product}". Respond in a simple markdown list.`;
                case 'audience':
                    return `Describe 3 distinct target audience personas for a product called "${product}". For each persona, include their name, demographics, interests, and pain points. Respond in simple markdown with headings for each persona.`;
                case 'social':
                    return `Write a creative and engaging Instagram post for the launch of a product called "${product}". Include a compelling caption, 3-5 relevant hashtags, and a clear call to action. Respond in simple markdown, using a blockquote for the caption.`;
                default:
                    return `Tell me about "${product}".`;
            }
        }

        // --- API Call and Display Logic ---
        async function generateIdeas(product, type) {
            resultsSection.classList.remove('hidden');
            resultsContainer.innerHTML = '<div class="text-center text-gray-400 animate-pulse">Entering the BlackBox... generating insights...</div>';
            generateBtn.disabled = true;
            generateBtn.textContent = 'Generating...';

            const prompt = getPrompt(product, type);
            const apiKey = ""; // API key will be injected here
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{
                    parts: [{ text: prompt }]
                }]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    
                    const text = result.candidates[0].content.parts[0].text;
                    // Use the 'marked' library to convert markdown to HTML
                    resultsContainer.innerHTML = marked.parse(text);
                } else {
                    throw new Error('Invalid response structure from API.');
                }

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                resultsContainer.innerHTML = `<div class="text-center text-red-400">An error occurred. The BlackBox is currently unavailable. Please try again later.</div>`;
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'Generate Ideas';
            }
        }
    </script>
</body>
</html>
